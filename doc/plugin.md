### 插件机制大升级，热插拔命令

> 对 sloty 还一无所知的，可以先阅读 [`sloty`的起源](./doc/about.md)

之前的版本里，我们支持把命令开发成一个独立的 npm 包，允许其他命令行开发者把你的命令集成到自己的命令行工具里去。

[命令开发指南 - 作为npm包](https://github.com/mohism-framework/sloty/blob/master/doc/ts/DEV_GUIDE_2.md)

不过，这个操作需要命令行开发者在安装你的 npm 包后，重新编译并发布自己的工具。

虽然省去了编码开发过程，但是在维护用户体验方面还不够友好（末端用户需要重新全局安装最新版的工具）。

##### 好消息的是，这次更新（v1.3.0） 我们提供了热插拔功能

> 末端用户一次安装，永久享受最新的能力

### 我们用一个具体的例子来体验一下

年初的时候，box团队（化名）使用 **sloty** 开发了一个命令行脚手架 `box-up`, 用于一键创建项目的代码模板。

> box-up init

在这个工具的加持下，团队成员可以很方便地启动一个新项目，同时维持团队的统一约定和风格。

**事情进展还不错**

在几个月后，团队成员在学习了 [命令开发指南 - 作为npm包](https://github.com/mohism-framework/sloty/blob/master/doc/ts/DEV_GUIDE_2.md) 章节后，

开发了一个用于 **一键构建项目docker镜像** 的包 `docker-build`，并在团队内部推广起来。

`box-up`工具自然是要跟进的，于是就有了下面的操作：

 - 开发人员在`box-up`工程里安装`docker-build`：   **npm i @box/docker-build**
 - 开发人员重新编译发布`box-up`： **npm run build && npm publish**
 - 通过一些手段通知用户升级:  **npm i @box/box-up -g**

上面这些操作，似乎还能更便捷？

**🔥 于是我们提出了“热插拔”**

期望：

 - 用户之前安装了`box-up`: **npm i @box/box-up -g**
 - 如果用户希望在自己本地的`box-up`里集成`docker-build`: **box-up plugin add @box/docker-build**
 - 使用一段时间后，觉得`docker-build`没什么用：  **box-up plugin remove @box/docker-build**
 - 如果还有其他新的功能面世，随时可以热插拔进来

#### 🔥 是的，这已经不是**期望**，而是现实。

这个版本，上面的操作都变成现实，这给我们带来了非常大的收益。

对于开发者：

  - 只专注于插件命令的开发，不关注集成
  - 不用频繁更新和发布 **主命令** ，或者我们叫做**基座命令**
  - 插件命令可以独立发布升级

对于末端用户：

  - 对命令的控制权完全掌握在自己手中
  - 你可以自由组合出自己的命令集，每个人电脑上的同一个工具，可以是不一样的
  - 有用就热插，不好用我就热拔，就是这么渣
  
### 最后几句话

可能你会有疑问，如果是按这个思路实现插件机制，

那岂不是全世界用户只需要一个统一的“基座”，然后各自组合自己的命令集？

确实可以这么做。

但是 `sloty` 还是开发给团队自己定义一个基座，哪怕只是**名字**和**power by**信息不一样。

这就好比，**gitlab** 你可以用云端的，也可以内部私有化部署。

我认为肯定有这个需求的。
